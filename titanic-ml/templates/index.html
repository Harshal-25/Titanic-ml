{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center">
	<div class="col-12 col-lg-8">
		<div class="card shadow-sm">
			<div class="card-header">
				<h5 class="mb-0">Titanic Survival Prediction</h5>
			</div>
			<div class="card-body">
				<form action="{{ url_for('predict') }}" method="post" class="row g-3">
					<div class="col-md-4">
						<label for="pclass" class="form-label">Passenger Class</label>
						<select id="pclass" name="pclass" class="form-select">
							{% for c in [1,2,3] %}
							<option value="{{ c }}" {% if inputs and inputs.get('pclass') == c %}selected{% endif %}>Class {{ c }}</option>
							{% endfor %}
						</select>
					</div>

					<div class="col-md-4">
						<label for="sex" class="form-label">Sex</label>
						<select id="sex" name="sex" class="form-select">
							{% for s in schema.categories.sex %}
							<option value="{{ s }}" {% if inputs and inputs.get('sex') == s %}selected{% endif %}>{{ s|capitalize }}</option>
							{% endfor %}
						</select>
					</div>

					<div class="col-md-4">
						<label for="embarked" class="form-label">Embarked</label>
						<select id="embarked" name="embarked" class="form-select">
							{% for e in schema.categories.embarked %}
							<option value="{{ e }}" {% if inputs and inputs.get('embarked') == e %}selected{% endif %}>{{ e }}</option>
							{% endfor %}
						</select>
					</div>

					<div class="col-md-4">
						<label for="age" class="form-label">Age</label>
						<input type="number" step="0.1" min="0" id="age" name="age" value="{{ inputs.age if inputs else '' }}" class="form-control" placeholder="e.g., 29">
					</div>

					<div class="col-md-4">
						<label for="sibsp" class="form-label">Siblings/Spouses Aboard</label>
						<input type="number" step="1" min="0" id="sibsp" name="sibsp" value="{{ inputs.sibsp if inputs else '' }}" class="form-control" placeholder="e.g., 0">
					</div>

					<div class="col-md-4">
						<label for="parch" class="form-label">Parents/Children Aboard</label>
						<input type="number" step="1" min="0" id="parch" name="parch" value="{{ inputs.parch if inputs else '' }}" class="form-control" placeholder="e.g., 0">
					</div>

					<div class="col-md-4">
						<label for="fare" class="form-label">Fare</label>
						<input type="number" step="0.01" min="0" id="fare" name="fare" value="{{ inputs.fare if inputs else '' }}" class="form-control" placeholder="e.g., 7.25">
					</div>

					<div class="col-12 d-flex gap-2">
						<button class="btn btn-primary" type="submit">Predict</button>
						<a href="/" class="btn btn-outline-secondary" role="button">Reset</a>
					</div>
				</form>

				{% if result %}
				<hr />
				<div class="alert {% if result.prediction == 1 %}alert-success{% else %}alert-danger{% endif %}" role="alert">
					<strong>Survival probability:</strong> {{ result.probability }}%
					<br />
					<strong>Predicted outcome:</strong> {% if result.prediction == 1 %}Survived{% else %}Did not survive{% endif %}
				</div>
				{% endif %}
			</div>
		</div>
	</div>
</div>
{% endblock %}
